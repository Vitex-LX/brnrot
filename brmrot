local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

local LocalPlayer = Players.LocalPlayer
local FlySettings = { flying = false, speed = 50 }
local FlyConnection

-- لود کردن WindUI
local WindUI = loadstring(game:HttpGet(
    "https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"
))()

local Window = WindUI:CreateWindow({
    Title  = "Vitex Hub",
    Icon   = "aperture",
    Author = "by Vitex",
    Theme  = "Violet",
    Acrylic = true,
})

Window:Tag({
    Title = "Beta-kooیصییصon",
    Icon = "history",
    Color = Color3.fromHex("#5f0188"),
    Radius = 0,
})

local Practical = Window:Tab({
    Title = "کاربردی",
    Icon = "flame",
})
Practical:Select()

-- منطق اصلی پرواز (Fly Logic)
local function handleFly()
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") or not char:FindFirstChild("Humanoid") then return end
    
    local hrp = char.HumanoidRootPart
    local humanoid = char.Humanoid

    if FlySettings.flying then
        if not hrp:FindFirstChild("FlyVelocity") then
            local bv = Instance.new("BodyVelocity")
            bv.Name = "FlyVelocity"
            bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            bv.Velocity = Vector3.new(0, 0, 0)
            bv.Parent = hrp

            local bg = Instance.new("BodyGyro")
            bg.Name = "FlyGyro"
            bg.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
            bg.P = 9000
            bg.CFrame = Camera.CFrame
            bg.Parent = hrp

            humanoid.PlatformStand = true
        end

        local moveDir = Vector3.zero
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + Camera.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - Camera.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - Camera.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + Camera.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveDir = moveDir + Vector3.new(0, 1, 0) end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then moveDir = moveDir - Vector3.new(0, 1, 0) end

        hrp.FlyVelocity.Velocity = moveDir.Magnitude > 0 and (moveDir.Unit * FlySettings.speed) or Vector3.zero
        hrp.FlyGyro.CFrame = Camera.CFrame
    else
        if hrp:FindFirstChild("FlyVelocity") then hrp.FlyVelocity:Destroy() end
        if hrp:FindFirstChild("FlyGyro") then hrp.FlyGyro:Destroy() end
        humanoid.PlatformStand = false
    end
end

-- اضافه کردن تاگل پرواز طبق فرمتی که دادی
local FlyToggle = Practical:Toggle({
    Title = "فعال‌سازی پرواز (Fly)",
    Callback = function(state)
        FlySettings.flying = state
        
        if state then
            FlyConnection = RunService.RenderStepped:Connect(handleFly)
        else
            if FlyConnection then
                FlyConnection:Disconnect()
                FlyConnection = nil
            end
            handleFly() -- ریست کردن حالت کاراکتر
        end
    end
})

-- برای اسلایدر هم اگر طبق داکیومنت نیاز به تغییر بود، این فرمت استاندارد WindUI هست:
local FlySlider = Practical:Slider({
    Title = "سرعت پرواز",
    Step = 1,
    Min = 16,
    Max = 300,
    Value = 50,
    Callback = function(value)
        FlySettings.speed = value
    end
})
